<section class="mt-10">

    <h2 class="text-center mb-10">Products</h2>
    <div class="slider grid place-items-center">
        <div class="w-full max-w-3xl h-[50rem] relative overflow-hidden">
            {% for product in collections['all'].products %}
                <div class="slide w-full max-w-3xl h-full aspect-auto absolute transition-all duration-500 ">
                    {% render 'image', image: product.featured_image, width: 1000 %}
                </div>
            {% endfor %}
            <button class="btn btn-prev bg-amber-50 absolute w-1/12 h-full p-10 border-none rounded z-10 cursor-pointer font-body top-0.5 left-0 active:scale-110"><</button>
            <button class="btn btn-next bg-amber-50 absolute w-1/12 h-full p-10 border-none rounded z-10 cursor-pointer font-body top-0.5 right-0 active:scale-110">></button>
        </div>
    </div>
    <script>
        const slides = document.querySelectorAll(".slide");

        slides.forEach((slide, indx) => {
            slide.style.transform = `translateX(${indx * 100}%)`;
        });
        let curSlide = 0;
        let maxSlide = slides.length - 1;

        const nextSlide = document.querySelector(".btn-next");
        const prevSlide = document.querySelector(".btn-prev");
        nextSlide.addEventListener("click", function () {
            if (curSlide === maxSlide) {
                curSlide = 0;
            } else {
                curSlide++;
            }
            slides.forEach((slide, indx) => {
                slide.style.transform = `translateX(${100 * (indx - curSlide)}%)`;
            });
        });
        prevSlide.addEventListener("click", function () {
            if (curSlide === 0) {
                curSlide = maxSlide;
            } else {
                curSlide--;
            }
            slides.forEach((slide, indx) => {
                slide.style.transform = `translateX(${100 * (indx - curSlide)}%)`;
            });
        });
    </script>


</section>
{% schema %}
{
  "name": "Slider",
  "settings": [
  ],
  "presets": [
    {
      "name": "Product Slider"
    }
  ]
}
{% endschema %}
